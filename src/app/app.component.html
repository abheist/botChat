<div fxFlex class="padding-20">
	<div fxLayout="row" fxLayoutAlign="space-between center">
		<div fxLayout="row" fxLayoutAlign="start center">
			<div style="background: #ffffff; border-radius: 6px;" class="margin-padding-0 mat-elevation-z8">
				<mat-form-field color="primary" appearance="outline">
					<input
						matInput
						[matDatepicker]="picker"
						placeholder="Choose a date"
						(dateInput)="filterChats($event)"
						[(ngModel)]="datePickerValue"
					/>
					<mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
					<mat-datepicker #picker></mat-datepicker>
				</mat-form-field>
			</div>
			<button mat-button (click)="removeFilter()">
				Clear Filter
			</button>
		</div>
		<h2>OSIRIS Bot Chat Session</h2>
	</div>
	<div fxLayout="row wrap" fxLayoutAlign="space-between start">
		<mat-accordion
			style="width: 300px; margin: 20px 0; background: #ffffff; border-radius: 8px;"
			*ngFor="let chat of allChats"
			class="mat-elevation-z5"
		>
			<mat-expansion-panel>
				<mat-expansion-panel-header>
					<mat-panel-title>
						{{ chat.title }}
					</mat-panel-title>
					<mat-panel-description *ngIf="chat.signifier">
						Type <span class="type-badge">{{ chat.signifier }}</span>
					</mat-panel-description>
				</mat-expansion-panel-header>
				<div class="grey-background">
					<div style="max-height: 300px; overflow: auto; padding-left: 24px;">
						<div class="padding-vertical-5">
							<div class="mat-body-2">Timestamp:</div>
							<div class="mat-caption">{{ chat.timestamp | date }}</div>
						</div>
						<mat-divider></mat-divider>
						<div class="padding-vertical-5">
							<div class="mat-body-2">Id:</div>
							<div class="mat-caption">{{ chat.id }}</div>
						</div>
						<mat-divider></mat-divider>
						<div fxLayout="row">
							<div fxFlex="90">
								<div class="padding-vertical-5">
									<div class="mat-body-2">Question:</div>
									<div class="mat-caption">{{ chat.question }}</div>
								</div>
								<mat-divider></mat-divider>
								<div class="padding-vertical-5">
									<div class="mat-body-2">Answer:</div>
									<div class="mat-caption">{{ chat.answer }}</div>
								</div>
							</div>
							<div>
								<button mat-icon-button [matMenuTriggerFor]="menu">
									<mat-icon>chevron_right</mat-icon>
								</button>
								<mat-menu #menu="matMenu">
									<div (click)="$event.stopPropagation()">
										<p style="padding: 0 16px; font-weight: 700;">Question's Intent</p>
										<mat-divider></mat-divider>
										<div style="padding: 10px 16px;">
											<div style="padding: 7px;">What are SNPs?</div>
											<div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
												<mat-form-field appearance="outline">
													<mat-label>Select Intent</mat-label>
													<mat-select>
														<mat-option
															*ngFor="let intent of dropdownMenu"
															[value]="intent.value"
														>
															{{ intent.viewValue }}
														</mat-option>
													</mat-select>
												</mat-form-field>
												<button mat-icon-button>
													<mat-icon>save</mat-icon>
												</button>
											</div>
										</div>
										<mat-divider></mat-divider>
										<div style="padding: 10px 16px;">
											<div style="padding: 7px;">What are SNPs?</div>
											<div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="5px">
												<mat-form-field appearance="outline">
													<mat-label>Select Intent</mat-label>
													<mat-select>
														<mat-option
															*ngFor="let intent of dropdownMenu"
															[value]="intent.value"
														>
															{{ intent.viewValue }}
														</mat-option>
													</mat-select>
												</mat-form-field>
												<button mat-icon-button>
													<mat-icon>save</mat-icon>
												</button>
											</div>
										</div>
									</div>
								</mat-menu>
							</div>
						</div>
						<mat-divider></mat-divider>
						<div class="padding-vertical-5">
							<div class="mat-body-2">Score:</div>
							<div class="mat-caption">{{ chat.score }}</div>
						</div>
					</div>
				</div>
			</mat-expansion-panel>
		</mat-accordion>
	</div>
</div>
